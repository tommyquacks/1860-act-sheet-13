// AbsoluteValue.vm
// Computes |x| and stores it in argument[1]
// Also sets argument[2] if x is negative
// Sets argument[3] if absolute value can't be computed

// Load x onto the stack
push argument 0    

// Duplicate x (needed for comparison)
push argument 0    

// Check if x < 0
lt                
if-goto NEGATIVE   // If x < 0, go to NEGATIVE

// If x >= 0, store x directly in argument[1]
push argument 0    
pop argument 1      // argument[1] = |x|

// Store 0 in argument[2] (x is not negative)
push constant 0
pop argument 2

// Set argument[3] to 0 (absolute value computed successfully)
push constant 0
pop argument 3

goto END            // Jump to end

(NEGATIVE)
// Compute -x (negate the top of the stack)
push argument 0
neg
pop argument 1      // argument[1] = -x

// Store 1 in argument[2] (x was negative)
push constant 1
pop argument 2

// Check if absolute value is valid (in Hack VM, all numbers are valid)
push constant 0
pop argument 3      // Set argument[3] to 0 (valid computation)

// Jump to end
(END)
push argument 1  // Leave the absolute value at the bottom of the stack
